# 02 硝烟中的 Scrum 和 XP ★★★★☆

## 如何编写产品待办列表 Product Backlog

## 用户故事 User Story 包含以下字段：

* **ID：**统一标识符，⾃增⻓的数字，用来防止重命名名故事称后，无法搜索到故事。
* **名称：**简短的、描述性的。⽐如「查看你⾃⼰的交易明细」。它必须要含义明确，这样开发⼈员和产品负责⼈才能⼤致明⽩我们说的是什么东⻄，跟其他故事区分开。它⼀般由 2 到 10 个字组成。
* **重要性 Importance：**产品负责⼈评出⼀个数值，指⽰这个故事有多重要。例如 10 或 150，分数越⾼越重要
	* 我⼀直都想避免优先级这个说法，因为⼀般说来优先级 1 都表⽰最⾼优先级，如果后来有其他更重要的东⻄就⿇烦了。它的优先级评级应该是什么呢？优先级 0 ？优先级 -1？
	* 分数只是⽤来根据重要性对待办事项列表条⽬排序。假如 A 的分数是 20，⽽ B 的分数是 100，那仅仅是说明 B ⽐ A重 要⽽已，绝不意味着 B ⽐ A 重要五倍。如果 B 的分数是 21 ⽽不是100，含义也是⼀样的。
	* 最好在分数之间留出适当间隔，以防后⾯出现⼀个 C，⽐ A 重要⽽不如 B 重要。当然我们也可以给 C 打⼀个 20.5 分，但这样看上去就很难看了，所以我们还是留出间隔来！
	* ⽆论任何故事，只要产品负责⼈相信它会在下⼀个 Sprint 实现，那它就应该被划分到⼀个特有的重要性层次。
* **初始估算 Initial Estimate：**团队的初步估算，表⽰与其他故事相⽐，完成该故事所需的⼯作量。
	* 最⼩的单位是故事点，1 故事点 = 1 理想化的人/天
	* 假设一个功能需要 3 个人研发 4 天，那么就是 12 故事点
	* 不需要保证估值绝对⽆误，⽐如两个故事点的故事就应该花两天时间，⽽是要保证相对的正确性，比如两个点的故事所花费的时间应该是四个点的故事所需的⼀半
* **如何做演示 How To Demo：**本质上是一个简单的测试规范。「先这样做，然后那样做，得到 XXX 结果」
* **注解 Notes：**相关信息、解释说明和对其他资料的引用等等，一般都非常简短。

我们曾试过很多字段，但最后发现，只有上⾯的六个字段会⼀直使⽤下去。

<a href='02%20%E7%A1%9D%E7%83%9F%E4%B8%AD%E7%9A%84%20Scrum%20%E5%92%8C%20XP%20%E2%98%85%E2%98%85%E2%98%85%E2%98%85%E2%98%86/1568614620521-a1bd13c3-6dc6-4b9c-b864-9200dfbbc6ad.png%23align=left&display=inline&height=1230&name=screely-1568170309766.png&originHeight=1230&originWidth=2120&size=343655&status=done&width=2120'>1568614620521-a1bd13c3-6dc6-4b9c-b864-9200dfbbc6ad.png#align=left&display=inline&height=1230&name=screely-1568170309766.png&originHeight=1230&originWidth=2120&size=343655&status=done&width=2120</a>screely-1568170309766.png


## 额外的用户故事字段
有时为了便于产品负责⼈判断优先级别，我们也会在产品待办事项列表中使⽤⼀些其他字段：

* **类别 Track：**当前故事的⼤致分类，例如「后台系统」或「优化」。这样产品负责⼈就可以很容易选出所有的「优化」条⽬，把它们的级别都设得⽐较低，类似的操作执⾏起来都很⽅便。
* **组件 Components：**通常在⽂档中⽤复选框实现，例如「数据库」「服务器」「客户端」。团队或者产品负责⼈可以在这⾥进⾏标识，以明确哪些技术组件在这个故事的实现中会被包含进来。这种做法在多个 Scrum 团队协作的时候很有⽤。⽐如⼀个后台系统团队和⼀个客户端团队，他们很容易知道⾃⼰应当对哪些故事负责。
* **请求者 Requestor：**产品负责⼈可能需要记录是哪个客户或相关⼲系⼈最先提出了这项需求，在后续开发过程中向他提供反馈。
* **Bug 跟踪 ID Bug tracking ID：**如果你有个 Bug 跟踪系统，那么了解⼀下故事与 Bug 之间的直接联系就会对你很有帮助。


## 如何让产品待办事项列表停留在业务层次上
如果产品负责⼈有技术相关的背景，那他就可能添加这样⼀个故事「给 Events 表添加索引」。他为啥要这么做？真正的潜在⽬标也许是要提⾼在后台系统中搜索事件表单的响应速度。

到后⾯我们可能会发现：索引并不是带来表单速度变慢的瓶颈。也许原因与索引完全不相⼲。指出如何解决问题的应该是开发团队，产品负责⼈只需要关注业务⽬标。

只要发现这种⾯向技术的故事，我⼀般都会问产品负责⼈「但是为什么呢」这样的问题，⼀直问下去，直到我们发现内在的⽬标为⽌。然后再⽤真正的⽬标来改写这个故事：提⾼在后台系统中搜索并⽣成表单的响应速度。

最开始的技术描述只会作为⼀个注解存在，为事件表添加索引可能会解决这个问题。


# 如何制定 Sprint 计划

## ⽆休⽌的 Sprint 计划会议
在 Sprint 计划会议中最困难的事情是：

* ⼈们认为他们花不了多⻓时间
* 但他们会的！

Scrum 中的⼀切事情都有时间盒 Time Box。我喜欢这条简单如⼀的规则，并⼀直⼒求贯彻到底。

假如 Sprint 计划会议接近尾声，但仍然没有得出 Sprint ⽬标或者 Sprint Backlog，这时该怎么办？我们要打断它么？还是再延⻓⼀个⼩时？或者到时间就结束会议，然后明天继续？

最好的方法是打断会议，这个 Sprint 让⼤家不太好过。但我们应该看到它的正⾯影响，整个团队都从中获益匪浅，下个 Sprint 计划会议会更有效率。另外，如果他们从前还觉得你定下的会议时间过⻓的话，下次他们的抵制情绪就会少⼀些了。

学会按照时间盒安排⼯作，学会制定合乎情理的时间盒，这对会议⻓度和 Sprint ⻓度同样有帮助。


## 确认 Sprint 长度
产品负责⼈⼀般会喜欢短⼀点的 Sprint，⽽开发⼈员喜欢时间⻓的 Sprint。所以 Sprint 的⻓度是妥协后的产物。做过多次实验后，我们最终总结出了最喜欢的⻓度：三个星期。绝⼤部分团队的 Sprint ⻓度都是三周。它不⻓不短，既让我们拥有⾜够的敏捷性，⼜让团队进⼊心流的状态，同时还可以解决 Sprint 中出现的问题。


## 确定 Sprint ⽬标
出于某些原因，制定 Sprint ⽬标确实很困难。但我发现即使是像挤⽛膏⼀样把它挤出来，那也是值得的。半死不活的⽬标也⽐啥都没有强。这个⽬标可以是挣更多的钱，或者完成优先级排到最前⾯的三个故事，或打动 CEO，或把系统做得⾜够好，可以作为 Beta 版发布给真正的⽤户使⽤，或添加基本的后台系统⽀持等等。

它必须⽤业务术语表达，⽽不是技术词汇，让团队以外的⼈也能够理解。


## 决定 Sprint 要包含的故事
决定哪些故事需要在这个 Sprint 中完成，是 Sprint 计划会议的⼀个主要活动。更具体地说，就是哪些故事需要从产品待办事项列表拷⻉到 Sprint Backlog 中，如下图所⽰。

<a href='02%20%E7%A1%9D%E7%83%9F%E4%B8%AD%E7%9A%84%20Scrum%20%E5%92%8C%20XP%20%E2%98%85%E2%98%85%E2%98%85%E2%98%85%E2%98%86/1568614726313-4f71aa61-6fcb-4674-973f-04a7c2d71351.png%23align=left&display=inline&height=1230&name=screely-1568122769088.png&originHeight=1230&originWidth=2120&size=117456&status=done&width=2120'>1568614726313-4f71aa61-6fcb-4674-973f-04a7c2d71351.png#align=left&display=inline&height=1230&name=screely-1568122769088.png&originHeight=1230&originWidth=2120&size=117456&status=done&width=2120</a>screely-1568122769088.png

每个矩形都表⽰⼀个故事，按重要性排序。最重要的故事在列表顶部。矩形尺⼨表⽰故事⼤⼩（也就是以故事点估算的时间⻓短。括号的⾼度表⽰团队估算的⽣产率 Estimated Velocity，也即团队认为他们在下⼀个 Sprint 中所能完成的故事点数。

在 Sprint 中包含多少故事由团队决定，⽽不是产品负责⼈或其他⼈。这便引发了两个问题：

* 团队怎么决定把哪些故事放到 Sprint ⾥⾯？
* 产品负责⼈怎么影响他们的决定？


## 产品负责⼈如何对 Sprint 放哪些故事产⽣影响
假设在 Sprint 计划会议中我们遇到下图所⽰的情况。

<a href='02%20%E7%A1%9D%E7%83%9F%E4%B8%AD%E7%9A%84%20Scrum%20%E5%92%8C%20XP%20%E2%98%85%E2%98%85%E2%98%85%E2%98%85%E2%98%86/1568614755142-82102b02-0efe-4ac1-8ce9-e0f7a45b8853.png%23align=left&display=inline&height=1230&name=screely-1568122776640.png&originHeight=1230&originWidth=2120&size=109748&status=done&width=2120'>1568614755142-82102b02-0efe-4ac1-8ce9-e0f7a45b8853.png#align=left&display=inline&height=1230&name=screely-1568122776640.png&originHeight=1230&originWidth=2120&size=109748&status=done&width=2120</a>screely-1568122776640.png

产品负责⼈很失望，因为故事 D 不会被放到 Sprint ⾥⾯。那他在 Sprint 计划会议上能做些什么？

* ⾸先，他可以重新设置优先级。如果他给故事 D 赋予最⾼的重要级别，团队就不得不把它先放到 Sprint⾥⾯来，需要把 C 扔出去。
* 其次，他可以缩⼩故事 A 的范围，直到团队相信故事 D 能在这个 Sprint ⾥完成为⽌
* 最后，他还可以拆分故事。产品负责⼈判断出故事A中某些⽅⾯实际并不重要，所以他把 A 分成两个故事 A1 和 A2，赋给它们不同的重要级别。

<a href='02%20%E7%A1%9D%E7%83%9F%E4%B8%AD%E7%9A%84%20Scrum%20%E5%92%8C%20XP%20%E2%98%85%E2%98%85%E2%98%85%E2%98%85%E2%98%86/1568614771876-52d52b76-01dd-4074-b572-0da3b3e77bab.png%23align=left&display=inline&height=1230&name=screely-1568122784593.png&originHeight=1230&originWidth=2120&size=123423&status=done&width=2120'>1568614771876-52d52b76-01dd-4074-b572-0da3b3e77bab.png#align=left&display=inline&height=1230&name=screely-1568122784593.png&originHeight=1230&originWidth=2120&size=123423&status=done&width=2120</a>screely-1568122784593.png


## 团队怎样决定把哪些故事放到 Sprint ⾥⾯
下图中，左边是 Sprint 启动时的估算的⽣产率，右边是 Sprint 结束时的实际⽣产率。每个矩形都是⼀个故事，⾥⾯的数字表⽰这个故事的原始估算。

<a href='02%20%E7%A1%9D%E7%83%9F%E4%B8%AD%E7%9A%84%20Scrum%20%E5%92%8C%20XP%20%E2%98%85%E2%98%85%E2%98%85%E2%98%85%E2%98%86/1568614796129-1a01d34e-1af9-432e-b653-daeac8013aac.png%23align=left&display=inline&height=1230&name=screely-1568122792044.png&originHeight=1230&originWidth=2120&size=124879&status=done&width=2120'>1568614796129-1a01d34e-1af9-432e-b653-daeac8013aac.png#align=left&display=inline&height=1230&name=screely-1568122792044.png&originHeight=1230&originWidth=2120&size=124879&status=done&width=2120</a>screely-1568122792044.png

这个数字并不精确。但它依然很有⽤，尤其是与啥都没有相⽐，感觉就更明显了。它可以给你⼀些硬⽣⽣的事实：抛开具体原因，我们曾经以为能完成这么多，⽽实际完成的⼯作与当初预计的还是有区别。

我们还可以看看团队的历史，看看他们在过去⼏个 Sprint ⾥⾯的⽣产率是多少，然后假定在下⼀个 Sprint ⾥⾯⽣产率差不多不变。

这项技术也叫昨⽇天⽓ Yesterday's Weather。要想使⽤该技术，必须满⾜两个条件：

* 团队已经完成了⼏个 Sprint，这样就可以得到统计数据
* 以⼏乎完全相同的⽅式，团队⻓度不变，⼯作状态等条件不变来进⾏下⼀个 Sprint

再复杂⼀点⼉，还可以进⾏简单的资源计算。假设我们在计划⼀个 4 ⼈团队 3 星期的 Sprint，15个⼯作⽇。Lisa 会休假两天，Dave 只能投⼊ 50 ％的时间，另外还会休假⼀天，把这些加到⼀起，这个 Sprint ⼀共有 50 个可⽤的⼈/天。

但实际中，估算的单位是故事点，也就是理想化的人/天。⼀个理想化的⼈/天是完美、⾼效、不受打扰的⼀天，但这种情况太少⻅了。我们还必须考虑到各种因素，例如要把未计划到的⼯作添加到Sprint 中、⼈们患病不能⼯作等等。

那我们的估算⽣产率肯定要⽐ 50 少，少多少呢？我们引⼊投⼊程度 Focus Factor 这个词来看下。

> 投⼊程度⽤来估算团队会在 Sprint 中投⼊多少精⼒。投⼊程度低，就表⽰团队估计会受到很⼤⼲扰，或者他们觉得⾃⼰的时间估算太过理想化。要想得出⼀个合理的投⼊程度，最好的办法就是看看上⼀个 Sprint的 值，对前⼏个 Sprint 取平均值⾃然更好。  
投入程度 = 故事点数 ÷ 估算生产率。假设上个 Sprint 中，⼯作了 45 个⼈/天，完成 18 个故事点，那么投入程度为 40%。

那么就能得出，本次 Sprint 估算生产率是 20 个故事点。

昨⽇天⽓⽤起来很⽅便，但需要考虑⼀些常识：

* 如果上⼀个 Sprint ⼲得很糟，是因为⼤部分成员都病了⼀星期。那你差不多可以放⼼假设这次运⽓不会那么坏，给这个 Sprint 设个⾼点的投⼊程度
* 如果团队最近刚装了⼀个执⾏速度快如闪电的持续集成系统，那你也可以因此提⾼⼀下投⼊程度
* 如果有新⼈加⼊这个 Sprint，就得把他的培训占⽤的精⼒也算进来，降低投⼊程度

只要条件允许，你就应该看看从前的 Sprint，计算出平均数，这样可以得到更合理的估算。

如果这是个全新的团队，没有任何数据怎么办？你可以参考⼀下在类似条件下⼯作的团队，他们的投⼊程度数值是多少。

如果没有其他团队可以参考怎么办？随便猜⼀个数作为投⼊程度吧。毕竟这个猜测只会在第⼀个Sprint ⾥⾯使⽤。过了这次以后你就有了历史数据可以分析，然后对投⼊程度和估算⽣产率做出不断的改进。

我在新团队中使⽤的默认投⼊程度通常是 70％，因为这是其他⼤多数团队都能达到的数值。


## 使⽤计划扑克做时间估算
估算是⼀项团队活动，通常每个成员都会参与所有故事的估算。为啥要每个⼈都参加？

* 在计划的时候，我们⼀般都还不知道到底谁会来实现哪个故事的哪个部分
* 每个故事⼀般有好⼏个⼈参与，也包括不同类型的专⻓，⽤户界⾯设计、编程、测试等
* 团队成员必须要对故事内容有⼀定的理解才能进⾏估算。要求每个⼈都做估算，我们就可以确保他们都理解了每个条⽬的内容。这样就为⼤家在 Sprint 中相互帮助夯实了基础，也有助于故事中的重要问题被尽早发现。
* 如果要求每个⼈都对故事做估算，我们就会常常发现两个⼈对同⼀个故事的估算结果差异很⼤。我们应该尽早发现这种问题并就此进⾏讨论。

如果让整个团队进⾏估算，通常那个对故事理解最透彻的⼈会第⼀个发⾔。不幸的是，这会严重影响其他⼈的估算。

> 这里就不太懂，比如设计师如何预估需要技术实现的 Story？设计师又不懂技术  
有⼀项很优秀的技术可以避免这⼀点，它的名字是计划扑克，它是 Mike Cohn 创造出来的。

每个⼈都会得到如下图所⽰的 13 张纸牌。在估算故事的时候，每个⼈都选出⼀张纸牌来表⽰他的时间估算，以故事点的⽅式表⽰，并把它正⾯朝下扣在桌上。所有⼈都完成以后，桌上的纸牌会被同时揭开。这样每个⼈都会被迫进⾏⾃我思考，⽽不是依赖于其他⼈估算的结果。

<a href='02%20%E7%A1%9D%E7%83%9F%E4%B8%AD%E7%9A%84%20Scrum%20%E5%92%8C%20XP%20%E2%98%85%E2%98%85%E2%98%85%E2%98%85%E2%98%86/1568614899388-cbbb6200-ee5a-4c1e-a83e-96bfee35e809.png%23align=left&display=inline&height=1230&name=screely-1568172384831.png&originHeight=1230&originWidth=2120&size=1102278&status=done&width=2120'>1568614899388-cbbb6200-ee5a-4c1e-a83e-96bfee35e809.png#align=left&display=inline&height=1230&name=screely-1568172384831.png&originHeight=1230&originWidth=2120&size=1102278&status=done&width=2120</a>screely-1568172384831.png

如果在两个估算之间有着巨⼤差异，团队就会就此进⾏讨论，并试图让⼤家对故事内容达成共识。他们也许会进⾏任务分解，之后再重新估算。这样的循环会往复进⾏，直到时间估算趋于⼀致为⽌，也就是每个⼈对这个故事的估算都差不多相同。

重要的是，我们必须提醒团队成员，他们要对这个故事中所包含的全部⼯作进⾏估算，⽽不是他们⾃⼰负责的部分⼯作。测试⼈员不能只估算测试⼯作。

注意，这⾥的数字顺序不是线性的。例如在 40 和 100 之间就没有数字。为什么这样？

这是因为，⼀旦时间的估算值⽐较⼤，其精确度就很难把握；这样做就可以避免⼈们对估算精确度产⽣错误的印象。如果⼀个故事的估算值是差不多 20 个故事点，它到底应该是 20 还是 18 还是 21，其实⽆关紧要。我们知道的就是它是⼀个很⼤的故事，很难估算。所以 20 只是⼀个粗略估计。

需要进⾏更精确的估算？那就把故事分拆，去估算那些更⼩的故事！

下⾯这些卡⽚⽐较特殊：

* 0：这个故事已经完成了或者这个故事根本没啥东⻄，⼏分钟就能搞定
* ？：我⼀点概念都没有。没想法
* 咖啡杯：我太累了，先歇会吧


# 我们怎样让别⼈了解我们的 Sprint
在讲述 Scrum 的书和⽂章中，⼤多数都是⽤⼩时⽽不是天数来估算时间。我们也这样⼲过。我们的通⽤⽅程为 1 个有效的⼈/天＝6 个有效的⼈/⼩时。

现在我们已经不这么⼲了，⾄少在⼤部分团队中如此。原因如下：

* ⼈/⼩时的粒度太细了，它会导致太多⼩到 1—2 个⼩时的任务出现，然后就会引发微观管理
* 最后发现实际上每个⼈还是按照⼈/天的⽅式来思考，只是在填写数据时把它乘 6 就得到了⼈/⼩时。「嗯……这个任务要花⼀天。哦，对，我要写⼩时数，那我就写 6 ⼩时好了」
* 两种不同的单位会导致混乱。「这个估算的单位是啥？⼈/天还是⼈/⼩时？」


# 我们怎样布置房间
**让团队坐在一起**

⼤家都懒得动。⾄少我⼯作的地⽅是这样的。他们不想收拾起⾃⼰的零碎⼉、拔下计算机电源、把东⻄都挪到新的电脑桌上，然后把⼀切再插回去。挪的距离越短，这种抵触情绪就越强烈。「⽼⼤，⼲嘛呢，动这 5 ⽶有啥⽤？」

这点深有体会。靠的越近、交流的会越频繁。之前刚工作的时候，和 leader 面对面，交流的一般。后来察觉到这个因素，搬到 leader 的旁边，交流频率显著上升，时不时的讨论下。

坐在一起有以下含义：

* 互相听到：所有⼈都可以彼此交谈，不必⼤声喊，不必离开座位
* 互相看到：所有⼈都可以看到彼此，都能看到任务板，不⽤⾮得近到可以看清楚内容，但⾄少可以看到个⼤概
* 隔离：如果你们整个团队突然站起来，⾃发形成⼀个激烈的设计讨论，团队外的任何⼈都不会被打扰到。反之亦然。

隔离并不是意味着这个团队需要被完全隔离起来。在⼀个格⼦间的环境中，如果你的团队拥有⾃⼰的格⼦，⽽且隔间的墙⾜够⼤，可以屏蔽墙内外的⼤多数噪⾳，这也就⾜够了。


# 我们怎么做 Sprint 回顾
**我们怎样才能在下个 Sprint 中做得更好：**

* Good：如果我们可以重做同⼀个 Sprint，哪些做法可以保留？
* Could Have Done Better：如果我们可以重做同⼀个 Sprint，哪些做法需要改变？
* Improvements：有关将来如何改进的具体想法？

**定义验收标准：**

* 必须发布：重要性 >＝ 100 的 User Story
* 应该发布：重要性在 50—99 之间
* 稍后发布：重要性在 25—49 之间的条⽬也都是需要的，不过可以在 1.1 版中发布
* 不确定的：重要性 <25 的条⽬都是不确定的，也许永远不会⽤到


# 我们怎样结合使用 Scrum 和 XP
Scrum 注重的是管理和组织实践，⽽ XP 关注的是实际的编程实践。这就是为什么它们可以很好地协同⼯作，它们解决的是不同领域的问题，可以互为补充，相得益彰。


## 结对编程

* 结对编程可以提⾼代码质量
* 结对编程可以让团队的精⼒更加集中。⽐如坐在你后⾯的那个⼈会提醒你，这个东⻄真的是本次 Sprint 必需的吗？
* 令⼈惊奇的是，很多强烈抵制结对编程的开发⼈员根本就没有尝试过，⽽⼀旦尝试之后就会迅速喜欢上它
* 结对编程令⼈精疲⼒竭，不能全天都这样做
* 常常更换结对是有好处的
* 结对编程可以增进团队间的知识传播，速度快到令⼈难以想象
* 有些⼈就是不习惯结对编程。不要因为⼀个优秀的开发⼈员不习惯结对编程就把他置之不理
* 可以把代码审查作为结对编程的替代⽅案
* 领航员（不⽤键盘的员工）应该⾃⼰也有⼀台机器。不是⽤来开发，⽽是在需要的时候稍稍做⼀些探索尝试、当司机（使⽤键盘的员工）、遇到难题的时候查看⽂档，等等
* 不要强制⼤家使⽤结对编程。⿎励他们，提供合适的⼯具，让他们按照⾃⼰的节奏去尝试


## 测试驱动开发 TDD
测试驱动开发意味着你要先写⼀个⾃动测试，然后编写恰好够⽤的代码，让它通过这个测试，接着对代码进⾏重构，主要是提⾼它的可读性和消除重复。整理⼀下，然后继续。

⼈们对测试驱动开发有着各种看法：

* TDD 很难，开发⼈员需要花上⼀定时间才能掌握。实际上，往往问题并不在于你⽤了多少精⼒去教学、辅导和演⽰。多数情况下，开发⼈员掌握它的唯⼀⽅式就是跟⼀个熟悉 TDD 的⼈⼀起结对编程，⼀旦掌握以后，他就会受到彻底的影响，从此再也不想使⽤其他⽅式⼯作。
* TDD 对系统设计的正⾯影响特别⼤。
* 在新产品中，需要过上⼀段时间，TDD 才能开始应⽤并有效运⾏，尤其是⿊盒集成测试。但是回报来得⾮常快。
* 投⼊⾜够的时间，来保证⼤家可以很容易地编写测试。这意味着要有合适的⼯具、有经验的⼈、提供合适的⼯具类或基类，等等。


# 我们怎样做测试

## 如果没有任何事情需要测试，测试⼈员该做什么？
⾸先，他应该要为测试做准备。包括编写测试规范，准备测试环境等等。开发⼈员有开发完的功能可供测试以后，就不⽤再等了，测试先⽣可以⽴刻开始测试。

如果团队在做 TDD，从第⼀天开始，⼤家都会花时间来编写测试代码，此时测试⼈员应该跟编写测试代码的开发⼈员⼀起结对编程。如果测试⼈员根本不会编程，他也应该跟开发⼈员结对，即便他只能坐在⼀边看，让开发⼈员敲键盘。相对于好的开发⼈员，好的测试⼈员常常能想出多种不同类型的测试，所以他们可以互补。

如果团队没有实施 TDD，或者没有⾜够的测试⽤例需要编写，那测试⼈员可以去随意做⼀些能够帮助团队达成 Sprint ⽬标的事情，就像其他团队成员⼀样。如果测试⼈员会编程，那⾃然再好不过。如果他不会，你的团队就得找出在 Sprint 中需要完成的、⽽且不⽤编程的⼯作。


# 我们怎样管理多个 Scrum 团队
在多个 Scrum 团队开发同⼀个产品的状况下，很多事情都会变得更加复杂、棘⼿。这个问题普遍存在，跟 Scrum 没太⼤关系。更多开发者＝更多复杂情况。

有两个核⼼问题：

* 要创建多少个团队？
* 如何把⼈员分配到各个团队中？


## 创建多少个团队？
单个 Scrum 团队最多包括 11 个⼈。⼤家可以⼀起⼯作，但是效果不好。每天的 Scrum 会议基本上都会超过 15 分钟。每个⼈都不太清楚其他⼈在做什么，所以整个状态就有些混乱。Scrum Master 很难保证每个⼈都在向同⼀个⽬标努⼒，也不太能找得到时间来解决发现的所有问题。

有⼈可能会建议说，把⼤团队分成两个团队。但这样做情况就⼀定会好转么？未必。

如果这个团队在实施 Scrum ⽅⾯很有经验，也习惯这种做法，⽽且能够以符合其内在逻辑的⽅式切分产品，把它分成两个独⽴的部分，保证各⾃的源代码不会重叠，那把团队分割就是⼀个好主意。不然我还是会坚持⽤⼀个团队，尽管⼤团队存在种种缺陷。

我的经验是，宁可团队数量少，⼈数多，也⽐弄上⼀⼤堆总在互相⼲扰的⼩团队强。要想拆分⼩团队，必须确保他们彼此之间不会产⽣互相⼲扰！


## 最佳的团队规模
在我读过的⼤多数书中，5 到 9 个⼈被公认为是最佳的团队构成⼈数。

从到⽬前为⽌观察到的情况来看，我同意这种说法。不过我会建议说 3 到 8 个⼈。⽽且我相信，为了达到这种团队规模，花上⼀定代价还是值得的。

假设你有⼀个 10 ⼈的 Scrum 团队。那么就考虑⼀下把最差的 2 个⼈踢出去吧。

假设你有两个不同的产品，每个产品都由⼀个 3 ⼈团队负责，进度都很慢。也许可以把他们合并成有 6 个⼈的团队，同时负责这两个产品。然后让其中⼀个产品负责⼈离开这⾥，或者给他顾问之类的⾓⾊。

假设你的团队有 12 个⼈，因为代码库很烂，所以两个团队不可能独⽴在上⾯⼯作。那就应该认真投⼊时间、精⼒修复代码库，⽽不是增加新功能，直到可以分拆团队为⽌。这种投资很快就可以得到回报。


## 我们怎样在团队中分配⼈⼿
有多个团队开发同⼀个产品时，⼀般有两种分配⼈⼿的策略：

* 让⼀个指定的⼈来做分配，例如产品负责⼈或 Scrum Master
* 让团队⾃⼰决定

我们这三种全都⽤过。三种？是的，策略 1，策略 2，还有两者的组合。我们发现两者组合以后的效果最好。

在 Sprint 计划会议之前，产品负责⼈和 Scrum Master ⼀起开团队分配会，讨论是否需要重新分配。也许会合并两个团队，或者调换某个⼈。我们就⼀些问题达成⼀致，并写到团队分配提案中，在Sprint 计划会议上进⾏讨论。

在 Sprint 计划会议上，我们⾸先遍历产品待办事项列表中优先级最⾼的条⽬。然后团队领导说「各位，我们建议下⼀个 Sprint 像下⾯这样分配⼈⼿。」

你们看，我们会从 4 个团队变成 3 个，每个团队中的⼈员名单已列出来了。你们可以凑到⼀块，⾃⼰商量⼀下要墙上的哪块地⽅。

产品负责人和 Scrum Master 耐⼼地等着⼤家在房间⾥转悠，直到他们分成 3 组，各⾃站在⼀块空墙下。